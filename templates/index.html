{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Creative - Bootstrap 3 Responsive Admin Template">
    <meta name="author" content="GeeksLabs">
    <meta name="keyword" content="Creative, Dashboard, Admin, Template, Theme, Bootstrap, Responsive, Retina, Minimal">
    <link rel="shortcut icon" href="{% static 'img/favicon.png' %}">
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">  
    <link href="{% static 'css/bootstrap-theme.css' %}" rel="stylesheet">
    <link href="{% static 'css/elegant-icons-style.css' %}" rel="stylesheet" />
    <link href="{% static 'css/font-awesome.min.css' %}" rel="stylesheet" />
    <link href="{% static 'assets/fullcalendar/fullcalendar/bootstrap-fullcalendar.css' %}" rel="stylesheet" />
    <link href="{% static 'assets/fullcalendar/fullcalendar/fullcalendar.css' %}" rel="stylesheet" />    
    <link href="{% static 'assets/jquery-easy-pie-chart/jquery.easy-pie-chart.css' %}" rel="stylesheet" type="text/css" media="screen" />    
    <link rel="stylesheet" href="{% static 'css/owl.carousel.css' %}" type="text/css">
    <link href="{% static 'css/jquery-jvectormap-1.2.2.css' %}" rel="stylesheet">    
    <link rel="stylesheet" href="{% static 'css/fullcalendar.css' %}">
    <link href="{% static 'css/widgets.css' %}" rel="stylesheet">
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
    <link href="{% static 'css/style-responsive.css' %}" rel="stylesheet" />
    <link href="{% static 'css/xcharts.min.css' %}" rel=" stylesheet">
    <link href="{% static 'css/jquery-ui-1.10.4.min.css' %}" rel="stylesheet">
  
    <title>Corona-Reportings</title>  
</head>

<body>
    {{ data|json_script:"hello-data" }}
    
    <section id="container" class="">    
        <header class="header">
            <a href="index.html" class="logo" style="color:#00a0df">
                <span class="profile-ava">
                    <img alt="" src="{% static 'img/avatar1_soumya.jpg' %}">
                </span>
                Corona            
                <span class="lite">
                    <small><small><small>&nbspReportings</small></small></small>
                </span>
            </a>
        </header>
        <section id="main-content">
            <!-- <section class="wrapper"> -->
            <section class="wrapper">       
                <div class="row">
                    <div class="col-lg-12">
                        <h3 class="page-header text-center"><i class="fa fa-disease"> </i> </h3>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-12 col-12 text-center">
                        <canvas id='globe' height=450 width=450></canvas>
                    </div>
                </div>
                <div class="row">
                    <span id="spark-1"></span>
                </div>
            </section>
        </section>
    </section>
    <!-- <li>
        <div><span id="todayspark5" class="spark"><canvas width="250" height="30" style="display: inline-block; width: 250px; height: 30px; vertical-align: top;"></canvas></span></div>
        <div class="datas-text">12,000000 visitors every Month</div>
      </li>  -->
    <script src="{% static 'js/jquery.js' %}"></script>
    <script src="{% static 'js/jquery-ui-1.10.4.min.js' %}"></script>
    <script src="{% static 'js/jquery-1.8.3.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/jquery-ui-1.9.2.custom.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/jquery.scrollTo.min.js' %}"></script>
    <script src="{% static 'js/jquery.nicescroll.js' %}" type="text/javascript"></script>
    <script src="{% static 'assets/jquery-knob/js/jquery.knob.js' %}"></script>
    <script src="{% static 'js/jquery.sparkline.js' %}" type="text/javascript"></script>
    <script src="{% static 'assets/jquery-easy-pie-chart/jquery.easy-pie-chart.js' %}"></script>
    <script src="{% static 'js/owl.carousel.js' %}"></script>
    <script src="{% static 'js/fullcalendar.min.js' %}"></script>
    <script src="{% static 'assets/fullcalendar/fullcalendar/fullcalendar.js' %}"></script>
    <script src="{% static 'js/calendar-custom.js' %}"></script>
    <script src="{% static 'js/jquery.rateit.min.js' %}"></script>
    <script src="{% static 'js/jquery.customSelect.min.js' %}"></script>
    <script src="{% static 'assets/chart-master/Chart.js' %}"></script>
    <script src="{% static 'js/scripts.js' %}"></script>
    <script src="{% static 'js/sparkline-chart.js' %}"></script>
    <script src="{% static 'js/easy-pie-chart.js' %}"></script>
    <script src="{% static 'js/jquery-jvectormap-1.2.2.min.js' %}"></script>
    <script src="{% static 'js/jquery-jvectormap-world-mill-en.js' %}"></script>
    <script src="{% static 'js/xcharts.min.js' %}"></script>
    <script src="{% static 'js/jquery.autosize.min.js' %}"></script>
    <script src="{% static 'js/jquery.placeholder.min.js' %}"></script>
    <script src="{% static 'js/gdp-data.js' %}"></script>
    <script src="{% static 'js/morris.min.js' %}"></script>
    <script src="{% static 'js/sparklines.js' %}"></script>
    <script src="{% static 'js/charts.js' %}"></script>
    <script src="{% static 'js/jquery.slimscroll.min.js' %}"></script>
    <script type='text/javascript' src='https://d3js.org/d3.v3.min.js'></script>
    <script type='text/javascript' src='https://d3js.org/topojson.v1.min.js'></script>
    <script type='text/javascript' src='https://cdn.rawgit.com/BinaryMuse/planetary.js/v1.1.2/dist/planetaryjs.min.js'></script>

    <script>
    //knob
    $(function() {
        $(".knob").knob({
            'draw': function() {
                $(this.i).val(this.cv + '%')
            }
        })
    });

    //carousel
    $(document).ready(function() {
        $("#owl-slider").owlCarousel({
            navigation: true,
            slideSpeed: 300,
            paginationSpeed: 400,
            singleItem: true
        });
    });

    $(function() {
        $('select.styled').customSelect();
    });

    /* ---------- Map ---------- */
    $(function() {
        $('#map').vectorMap({
            map: 'world_mill_en',
            series: {
                regions: [{
                values: gdpData,
                scale: ['#000', '#000'],
                normalizeFunction: 'polynomial'
                }]
            },
            backgroundColor: '#eef3f7',
            onLabelShow: function(e, el, code) {
                el.html(el.html() + ' (GDP - ' + gdpData[code] + ')');
            }
        });
    });
    </script>
    <script type="text/javascript">
        var arr = JSON.parse(document.getElementById('hello-data').textContent);
        var planet = planetaryjs.planet();    
    
        // You can remove this statement if `world-110m.json` is in the same path as the HTML page:
        planet.loadPlugin(
            planetaryjs.plugins.earth({
                topojson: { 
                    file: 'https://raw.githubusercontent.com/BinaryMuse/planetary.js/v1.1.2/dist/world-110m.json' 
                },
                oceans:   { fill:   '#000011' },
                land:     { fill:   '#4CAF50' },
                borders:  { stroke: '#1B5E20' }
            })
        );

        // Load our custom autorotate plugin
        planet.loadPlugin(autorotate(10));

        // Load the `pings` plugin to draw animated pings on the globe
        planet.loadPlugin(planetaryjs.plugins.pings({
            color: '#ff0000', ttl: 1000, angle: 10
        }));

        // Make the planet fit well in its canvas
        planet.projection.scale(200).translate([200, 200]);
        var canvas = document.getElementById('globe');
        planet.draw(canvas);

        // This plugin will automatically rotate the globe around its vertical
        // axis a configured number of degrees every second.
        function autorotate(degPerSec) {
            // Planetary.js plugins are functions that take a `planet` instance
            // as an argument...
            return function(planet) {
                var lastTick = null;
                var paused = false;
                planet.plugins.autorotate = {
                    pause:  function() { paused = true;  },
                    resume: function() { paused = false; }
                };
                // ...and configure hooks into certain pieces of its lifecycle.
                planet.onDraw(function() {
                    if (paused || !lastTick) {
                        lastTick = new Date();
                    } else {
                        var now = new Date();
                        var delta = now - lastTick;
                        // This plugin uses the built-in projection (provided by D3)
                        // to rotate the globe each time we draw it.
                        var rotation = planet.projection.rotate();
                        rotation[0] += degPerSec * delta / 1000;
                        if (rotation[0] >= 180) rotation[0] -= 360;
                        planet.projection.rotate(rotation);
                        lastTick = now;
                    }
                });
            };            
        };
        
        // for (var i = 0; i < arr.length; i++){
        //     var obj = arr[i];
        //     // console.log(obj.country_region)            
        //     // console.log(obj.longitude)
        //     // console.log(obj.latitude)
        // }
        setInterval(function() {
            for (var i = 0; i < arr.length; i++){
                var obj = arr[i];
                lng = obj.longitude;
                lat = obj.latitude;
                planet.plugins.pings.add(lng, lat, { color: 'red', ttl: 1500, angle: 4});        
            }
        }, 1000);
    </script>
    <!-- <script>

        $(function() {

            var data1 = [10,8,5,7,4,4,1,5,3,7,4,5,6,3];
            var data2 = [30,4,6,3,8,9,5,4,3,2,3,2,4,6,7];

            $('#spark-1').sparkline(data1, {
                height: 100,
                width: 300,
                changeRangeMin: -10, 
                chartRangeMax: 10,
            });

            $('#spark-1').sparkline(data2, {
                changeRangeMin: -10, 
            chartRangeMax: 10,
            lineColor: "green",
                composite: true
            });
        });
    </script> -->
    <script>
    $(document).ready(function() {
        console.log("wow")
        var json = (function () {
            var json = null;
            $.ajax({
                'async': false,
                'global': false,
                'url': 'https://coronazyx.herokuapp.com/api/coronafeed',
                'dataType': "json",
                'success': function (data) {
                    json = data;
                }
            });
        console.log(json);
})(); 
    });
    
    </script>    

</body>
</html>
